# FTP Client
1. [Требования к реализации](#task)
2. [Инструкция по сборке](#building)
3. [Инструкция по работе с приложением](#how-to-use)

Тесты для приложения расположены в отдельном [репозитории](../../../FTPClient-tests).

## Требования к реализации <a name="task"></a>
Необходимо реализовать клиент для работы с FTP сервером, на котором расположен файл с
информацией о студентах кафедры в виде JSON подобной структуры:
```json
{
   "students": [
      {
         "id": 1,
         "name": "Student1"
      },
      {
         "id": 2,
         "name": "Student2"
      },
      {
         "id": 3,
         "name": "Student3"
      }
   ]
}
```
Клиент должен быть разработан в виде консольного приложения, принимающего на вход
логин, пароль пользователя и IP-адрес FTP-сервера, после чего выводит меню, в котором
доступны на выбор следующие действия:
1. Получение списка студентов (при выводе список должен быть отсортирован по имени)
2. Получение информации о студенте по id
3. Добавление студента (id генерируется автоматически)
4. Удаление студента по id
5. Завершение работы

Дополнительные требования:
- Клиент должен уметь работать с FTP-сервером в двух режимах: активном и пассивном.
- Решение должно быть выполнено с использованием Java SE 8.
- Для сборки не должны скачиваться внешние библиотеки, не входящие в состав JDK.

## Инструкция по сборке <a name="building"></a>
**С помощью Maven:**
```shell
mvn clean install
```
**Через командную строку:**
```shell
mkdir target
javac -d target -sourcepath src/main/java src/main/java/App.java
jar cfe target/FTPClient.jar App -C target .
```
В обоих случаях исполняемый jar-файл будет находиться в директории `target`.

## Инструкция по работе с приложением <a name="how-to-use"></a>
### Запуск и конфигурация
Чтобы запустить FTP клиент, введите следующую команду
(указав корректный путь к исполняемому jar файлу):
```shell
java -jar target/FTPClient.jar
```
Дополнительно можно указать путь к файлу с конфигурацией:
```shell
java -DconfigFile=path/to/config.properties -jar target/FTPClient.jar
```
В файле конфигурации можно указать следующие свойства:
- `ftp.student-data-filepath` - путь к json файлу на FTP-сервере с данными о студентах (по умолчанию `students.json`).
- `ftp.active-mode` - установлен ли изначально активный режим (по умолчанию `true`).
Если когда-либо при обмене данными клиенту не удастся установить активный режим, он автоматически сменится на пассивный.
- `ftp.welcome-messages-count` - количество приветственных сообщений после подключения к серверу (по умолчанию `1`). 
Такое свойство было добавлено, чтобы проще было обработать подключение, так как в теории количество приветственных сообщений не ограничено.
К примеру, FileZilla Server 1.8.2 по умолчанию возвращает 2 приветственных сообщения, а не 1.
- `ftp.dt-buffer-size` - размер буфера при обмене данными (по умолчанию 8192).

Пример файла конфигурации: [config.properties](src/main/resources/config.properties).

### Использование
1. Запустите FTP-клиент.
2. Введите адрес FTP-сервера, имя пользователя и пароль.
3. Будет показан список команд и приглашение к вводу.
4. Действуйте согласно инструкциям приложения.

### Некоторые особенности клиента
- Перед выполнением каждой команды клиент обращается за актуальными данными к серверу.
Если данные получить не удается, используется копия данных, сохраненных локально.
Но команды модификации (add, remove) в таком случае выполнятся не будут, так как по задумке необходима
гарантия фактического обновления данных на сервере.
- IP клиента для обмена данным в активном режиме подразумевается равным `127.0.0.1`